#!/usr/bin/env bash
main_(){ local SRC="${SRC:-$(realpath "$(sed 's/\/[^\/]*$//'<<<"$0")")}";local WKD="${WKD:-$PWD}";local ext;if [[ -e ${WKD%/}/.rc/run_/\@/ext ]] 2>/dev/null;then ext="${WKD%/}/.rc/run_/@/ext";elif [[ ${SRC%/} != ${WKD%/}&&-e ${SRC%/}/.rc/run_/\@/ext ]] 2>/dev/null;then ext="${SRC%/}/.rc/run_/@/ext";else exit 2;fi;eval '_64run_95_47ext="$(<"$ext")"' 2>/dev/null||exit;local VER="${VER:-1.0}";[[ -z ${OUT+1} ]]||local OUT="$OUT";[[ -z ${MODE+1} ]]||local MODE="$MODE";local PRE="$PRE";local PST="$PST";recall_(){ local -i f;[[ $1 == -f ]]&&{ f=1;shift;};local c='_64'"$(awk "$SAN" "${1:-$EXT}")";if [[ f -eq 1||$(type -t "$c") != function ]];then if [[ ${1:-$EXT} == /* ]];then EXT=/"${1:-$EXT}" eval "$_64run_95_47ext" 2>/dev/null||eval "${2:-$EXX}";else EXT="${1:-$EXT}" eval "$_64run_95_47ext" 2>/dev/null||eval "${2:-$EXX}";fi;echo -n 'eval "'"$c"'(){
$(cat "'"$(sed 's/\([\\"$]\)/\\\\\\\1/g'<<<"$ext")"'" 2>/dev/null)
}" 2>/dev/null';[[ -z ${3:-$RCX} ]]||echo -n '||eval '"$(printf '%q' "${3:-$RCX}")";echo -n \;;[[ -z ${4:-$RCT} ]]||echo -n 'eval '"$(printf '%q' "${4:-$RCT}")"'&&';fi;echo -n "$c";};resource_(){ local -i f;[[ $1 == -f ]]&&{ f=1;shift;};local c='_64'"$(awk "$SAN" "${1:-$EXT}")";if eval '[[ f -eq 1||-z ${'"$c"'+1} ]]';then if [[ ${1:-$EXT} == /* ]];then EXT=/"${1:-$EXT}" eval "$_64run_95_47ext" 2>/dev/null||eval "${2:-$EXX}";else EXT="${1:-$EXT}" eval "$_64run_95_47ext" 2>/dev/null||eval "${2:-$EXX}";fi;echo -n 'eval "'"$c"'=\"\$(cat \"'"$(sed 's/\([\\"$]\)/\\\\\\\1/g'<<<"$ext")"'\" 2>/dev/null)\"" 2>/dev/null';[[ -z ${3:-$RCX} ]]||echo -n '||eval '"$(printf '%q' "${3:-$RCX}")";echo -n \;;[[ -z ${4:-$RCT} ]]||echo -n 'eval '"$(printf '%q' "${4:-$RCT}")"'&&';fi;echo -n 'eval "$'"$c"\";};local SAN='BEGIN{for(n=0;n<256;n++)c[sprintf("%c",n)]=n;n=split(ARGV[1],s,"");for(i=1;i<=n;i++){o=c[s[i]];if(o<=64||(o>=91&&o<=96)||o>=123)printf("_"o);else printf(s[i])}}';local -a WRD=('' '_0123456789');local -a CHS=(0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z _ a b c d e f g h i j k l m n o p q r s t u v w x y z);[[ RSV -le 0 ]] 2>/dev/null||eval "$(recall_ run_/reserve)" BKP BKR BKW BKX BKZ CAP CHS ext EXT LDD LDX MODE OFS OUT PRE PST RCT RCX RESET RSV SAN SLEEP SRC UDD UDX VER WAIT WKD WRD WRK $(IFS=$'\n' read -d '' -ra env<<<"$(printenv 2>/dev/null||env 2>/dev/null)";for v in "${env[@]}";do cut -d= -f1<<<"$v";done) BASH_ARGC BASH_ARGV BASH_COMMAND BASH_EXECUTION_STRING BASH_ENV BASH_LINENO BASH_REMATCH BASH_SOURCE BASH_SUBSHELL BASH_VERSION BASH_VERSINFO CDPATH COLUMNS COMP_CWORD COMP_LINE COMP_POINT COMP_WORDBREAKS COMP_WORDS COMPREPLY DIRSTACK EUID FUNCNAME FCEDIT FIGNORE GLOBIGNORE GROUPS IFS HISTCMD HISTCONTROL HISTFILE HISTIGNORE HISTSIZE HISTFILESIZE HISTTIMEFORMAT HOME HOSTFILE HOSTNAME HOSTTYPE IGNOREEOF INPUTRC LANG LC_ALL LC_COLLATE LC_CTYPE LC_MESSAGES LC_NUMERIC LINENO LINES MACHTYPE MAILCHECK MAILPATH OLDPWD OPTARG OPTERR OPTIND OSTYPE PATH PIPESTATUS POSIXLY_CORRECT PROMPT_COMMAND PS1 PS2 PS3 PS4 PPID PWD RANDOM REPLY SECONDS SHELLOPTS SHLVL TIMEFORMAT TMOUT UID;EXT=run_/parse_opts eval "$_64run_95_47ext"&&{ eval '_64run_95_47parse_95opts="$(<"$ext")"' 2>/dev/null||exit;eval "$_64run_95_47parse_95opts"||exit "${1:-2}" 2>/dev/null;};[[ MODE -eq 1||MODE -eq 2 ]] 2>/dev/null&&{ [[ -n ${_64run_95_47mkdir_95_out+1} ]]||{ EXT=run_/mkdir_out eval "$_64run_95_47ext"&&eval '_64run_95_47mkdir_95_out="$(<"$ext")"' 2>/dev/null;}&&eval "$_64run_95_47mkdir_95_out"||exit;};EXT=run_/prep eval "$_64run_95_47ext"&&{ eval '_64run_95_47prep(){ '"$(cat "$ext" 2>/dev/null||echo ':;')"'
}' 2>/dev/null;_64run_95_47prep run_ return_ 2>/dev/null;};[[ $(type -t run_) == function&&$(type -t return_) == function ]]||exit 2;unset -v ext;[[ RSV -le 0 ]] 2>/dev/null||{ [[ -z $PRE ]]||eval "$(recall_ run_/reserve)" "$PRE" $(eval 'sed '\''s/[^_[:alnum:]]/  /g;s/ [0-9]\{1,\} //g'\''<<<" ${'"$PRE"'} "' 2>/dev/null);[[ -z $PST ]]||eval "$(recall_ run_/reserve)" "$PST" $(eval 'sed '\''s/[^_[:alnum:]]/  /g;s/ [0-9]\{1,\} //g'\''<<<" ${'"$PST"'} "' 2>/dev/null);};run_ "$@";}&&main_ "$@"
